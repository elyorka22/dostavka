# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

## –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞?

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Firebase –º–æ–∂–µ—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–æ–≤—Ä–µ–º—è

**–ú–µ—Å—Ç–æ –≤ –∫–æ–¥–µ:** `js/users.js`, —Å—Ç—Ä–æ–∫–∞ 264-299

```javascript
if (typeof API_MODE !== 'undefined' && API_MODE === 'firebase') {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase
    if (typeof firebase === 'undefined') {
        return Promise.reject(new Error('Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω'));
    }
    
    if (typeof isFirebaseInitialized === 'undefined' || !isFirebaseInitialized()) {
        // –ü–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        if (typeof initFirebase !== 'undefined') {
            if (!initFirebase()) {
                return Promise.reject(new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Firebase'));
            }
        }
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ï—Å–ª–∏ Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Promise.reject`
- –ù–æ –≤ `login.html` —ç—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Firebase –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–æ –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: API_MODE –º–æ–∂–µ—Ç –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ú–µ—Å—Ç–æ –≤ –∫–æ–¥–µ:** `js/api.js`, —Å—Ç—Ä–æ–∫–∞ 10-26

```javascript
var API_MODE = 'localStorage'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é

if (typeof window !== 'undefined' && window.location) {
    if (window.location.hostname !== 'localhost' && 
        window.location.hostname !== '127.0.0.1') {
        API_MODE = 'firebase'; // –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `API_MODE` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ `api.js`
- –ù–æ `setAPIMode('firebase')` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ –≤ `login.html`
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ —Ä—É—á–Ω–æ–π

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∏ Firebase Auth –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ú–µ—Å—Ç–æ –≤ –∫–æ–¥–µ:** `js/users.js`, —Å—Ç—Ä–æ–∫–∞ 303-330

```javascript
return auth.createUserWithEmailAndPassword(email, password)
    .then(function(userCredential) {
        // –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ Firestore
        return db.collection('users').doc(user.uid).set(userData)
    })
    .catch(function(error) {
        return Promise.reject(error); // –û—à–∏–±–∫–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–∞–ª—å—à–µ
    });
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ Firebase Auth –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, –æ–Ω–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Promise.reject`
- –ù–æ –≤ `login.html` –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

## üîß –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–¥ Firebase

### –®–∞–≥ 1: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `register()` —á—Ç–æ–±—ã –æ–Ω–∞:
1. –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ Promise (–¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
3. –ü–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –®–∞–≥ 2: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

–ü–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –Ω—É–∂–Ω–æ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Firebase SDK –∑–∞–≥—Ä—É–∂–µ–Ω
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Firebase, –µ—Å–ª–∏ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
3. –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

## üöÇ –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway –∫–∞–∫ –±—ç–∫–µ–Ω–¥

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Railway:
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –±—ç–∫–µ–Ω–¥–æ–º
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –ë–î (PostgreSQL, MongoDB)
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Firebase
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–°–æ–∑–¥–∞—Ç—å Node.js —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway:**
   - Express.js –¥–ª—è API
   - PostgreSQL –∏–ª–∏ MongoDB –¥–ª—è –ë–î
   - JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

2. **–°–æ–∑–¥–∞—Ç—å API endpoints:**
   - `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
   - `POST /api/auth/login` - –≤—Ö–æ–¥
   - `GET /api/users/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

3. **–ò–∑–º–µ–Ω–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `API_MODE = 'api'`
   - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Railway API
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–Ø —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. Firebase –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
2. Railway –¥–∞–µ—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è
3. –õ–µ–≥—á–µ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
4. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å?

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Firebase (–±—ã—Å—Ç—Ä–æ)

1. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ `register()`
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
3. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Railway (–Ω–∞–¥–µ–∂–Ω–µ–µ)

1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π Node.js —Å–µ—Ä–≤–µ—Ä
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API endpoints
3. –ò–∑–º–µ–Ω–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API

**–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ?**

